---
title: Composer และ Packagist
isChild: true
---

## Composer และ Packagist {#composer_and_packagist_title}

Composer เป็น dependency manager ที่ดีมากสำหรับ PHP คุณสามารถที่จะรวบรวม dependency ที่คุณใช้ในโครงการของคุณได้
โดยรวมรวมไว้ใน `composer.json` ไฟล์และคุณก็สามารถที่จะคำสั้งง่ายๆในการใช้ Composer เพื่อที่จะให้ Composer
ดาวน์โหลด dependency ให้คุณโดยอัตโนมัติ และนอกจากนั้น Composer ยังทำการติดตั้ง autoloading ให้ในโครงการของคุณทันที

PHP ได้มี libraries จะนวนมากที่รองรับการใช้งานร่วมกับ Composer และนั้นก็หมายความว่า libraries เหล่านี้ก็พร้อมให้คุณนำ
มาใช้งานได้ทันทีในโครงการของคุณ คุณสามารถที่จะหาแพคเกจแหล่านี้ได้ใน [Packagist][1]
(ศูณย์รวม PHP libraries ที่สามารถนำมาใช้ได้กับ Composer อย่างเป็นทางการ)

### จะติดตั้ง Composer ได้อย่างไร?

คุณสามารถที่จะติดตั้ง Composer ได้ในเครื่องคอมพิวเตอร์ของคุณ (ในไดเรกทอรีที่คุณใช้ทำงาน แต่เราไม่แนะนำให้ใช้วิธีนี้) หรือ
คุณสามารถติดตั้งในสภาพแวดล้อมทั่วไปของคุณ (อย่างเช่น ใน Unix, Linux หรือ Mac จะติดตั้งใน /usr/local/bin)
ยกตัวอย่างว่า ถ้าคุณต้องการที่จะติดตั้งในไดเรกทอรีที่คุณใช้งาน เราจะไปที่ root ไดเรกทอรีของโครงการของเรา:

    curl -s https://getcomposer.org/installer | php

คำสั่งนี้จะทำการดาวน์โหลด `composer.phar` (*.phar ไฟล์เป็น PHP binary archive) คุณสามารถที่จะใช้คำสั่ง command line `php`
ในการจัดการ dependencies ของโครงการคุณ <strong>หมายเหตุ:</strong> ถ้าคุณใช้ pipe (|) คำสั่งใน terminal
แล้วให้ส่ง output ออกไปที่ interpreter อย่างในตัวอย่างนี้ command | php คุณจะต้องมั่นใจว่าโปรแกรมที่คุณส่งไปให้ interpreter นั้นปลอดภัย
แต่ตัวอย่างข้างบน ที่เราใช้ `curl` ในการ download โปรแกรมจาก Composer นั้นปลอดภัยเพราะ Composer ได้รับการยอมรับจากชุมชน PHP
เรียบร้อยแล้วว่าปลอดภัย

### จะติดตั้ง Composer ได้อย่างไร? (ด้วยตัวคุณเอง)

จากติดตั้ง Composer ด้วยตัวคุณเองนั้นจะต้องใช้วิธีขั้นตอนมากมายในการติดตั้ง แต่มีเหตุผลที่ผู้พัฒนาโปรแกรมส่วนมากใช้วิธีนี้ในการติดตั้ง Composer
มากกว่าที่จะใช้โปรแกรมติดตั้งให้คุณ สาเหตุนั้นก็คือ การใช้โปรแกรมติดตั้งให้นั้นจะตรวจสอบว่า

- จะตรวจสอบรุ่นของ PHP ว่ารองรับไหม
- สามารถที่จะใช้ `.phar` ไฟล์ได้
- ไดเรกทอรีบางอย่างที่ต้องการ จะต้องได้รับการติดตั้ง permissions ได้อย่างถูกต้อง
- extensions บางตัวที่มีปัญหาจะต้องไม่ได้รับการโหลดมาติดตั้ง
- ไฟล์ `php.ini` นั้นจะต้องมาค่าติดตั้งที่รองรับ

แต่การติดตั้งด้วยตัวคุณเองนั้น คุณไม่จำเป็นที่จะต้องตรวจสอบสิ่งต่างๆเลย คุณจึงมีอิสรภาพในการติดตั้งค่าต่างๆในระบบของคุณได้ด้วยตัวคุณเอง

    curl -s https://getcomposer.org/composer.phar -o $HOME/local/bin/composer
    chmod +x $HOME/local/bin/composer

path `$HOME/local/bin` (หรือคุณจะเปลี่ยนเป็นไดเรกทอรีใดๆก็ได้ที่คุณต้องการ) หลังจากนั้นคุณจะต้องนำ path นี้ไปติดตั้งใน `$PATH`
environment variable ของคุณ ถ้าคุณได้ติดตั้งอย่างถูกต้อง คุณจะสามารถเรียกใช้ `composer` ใน command ได้ทันที

ถ้าคุณเห็นบางตัวอย่างหรือบทความที่อ้างอิงถึงการเรียกใช้ Composer ดังนี้ `php composer.phar install` คุณสามารถที่จะใช้คำสั่งนี้แทนได้
ในทันที

    composer install

### จะทำการกำหนดค่าและติดตั้ง Dependencies เหล่านี้ได้อย่างไร?

Composer จะมีไฟล์ที่เรียกว่า `composer.json` ไฟล์นี้จะมีข้อมูลของ dependencies ของที่โครงการเราใช้ คุณสามารถที่จะจัดการระบบด้วยตัวคุณเองอย่างง่ายดาย
ในไฟล์นี้ หรือคุณจะใช้ Composer ก็ได้ คำสั่งนี้ `php composer.phar require` จะทำการเพิ่ม dependencies ให้คุณเอง และถ้าคุณไม่มีไฟล์ `composer.json`
คำสั่งนี้ก็จะสร้างไฟล์นี้ให้คุณทันที เรามาลองใช้คำสั่งนี้ในการเพิ่ม [Twig][2] เข้าไปใน dependency ของโครงการคุณ คุณจะต่้องใช้คำสั่งนี้ใน root directory ของ
โครงการคุณที่คุณได้ดาวน์โหลด `composer.phar` มา:

    php composer.phar require twig/twig:~1.8

หรือถ้าคุณใช้คำสั่ง `php composer.phar init` นี้ คำสั่งนี้จะมีตัวเลือกให้คุณได้ทำการสร้างไฟล์ `composer.json` ให้ในโครงการของคุณ ไม่ว่าคุณใช้วิธีไหน
ก็ตาม คุณก็จะมี `composer.json` ไฟล์ในโครงการของคุณ และคุณสามารถที่จะให้ Composer ดาวน์โหลดและติดตั้ง dependencies เหล่านี้ให้คุณในไดเรกทอรี
`vendors/` นอกจากนี้บางโครงการที่มี `composer.json` ไฟล์ติดตั้งมาด้วย คุณก็สามารถที่จะเรียกใช้งานได้เช่นกัน

    php composer.phar install

ขั้นต่อไป คุณแค่เพียงนำบรรทัดข้างล่างนี้ไปใส่ในยังไฟล์โปรแกรมหลักของโครงการคุณ เพียงเท่านี้ Composer's autoloader จะคอยเรียก dependencies
ของโครงการคุณให้เอง

{% highlight php %}
<?php
require 'vendor/autoload.php';
{% endhighlight %}

เพียงเท่านี้คุณก็สามารถที่จะเรียกใช้ dependencies ของโครงการคุณได้ และ dependencies เหล่านี้จะเรียกใช้เมื่อเราต้องการ

### การอัปเดต dependencies ของคุณ

Composer จะสร้างไฟล์ `composer.lock` ให้ ไฟล์นี้จะเก็บรุ่นแพ็กเกจที่คุณได้ดาวน์โหลดเมื่อเรียกใช้คำสั่ง `php composer.phar install`
และถ้าคุณได้ร่วมใช้โครงการของคุณกับนักพัฒนาอื่นๆและโครงการคุณนั้นได้มีไฟล์ `composer.lock` ติดไปด้วย เมื่อเขาได้ใช้คำสั่ง
`php composer.phar install` เขาก็จะได้ดาวน์โหลด dependencies รุ่นเดียวกับที่คุณใช้ในโครงการของคุณ ถ้าคุณต้องการที่จะอัปเดต
dependencies ของคุณ คุณเพียงแค่ใช้คำสั่ง `php composer.phar update` คำสั่งนี้จะมีประโยชน์อย่างมากเมื่อคุณได้เลือกใช้รุ่นของ dependencies
ที่ไม่ได้เจาะจง อย่างเช่น คุณเลือกใช้รุ่นที่ ~1.8 ก็หมายความว่า "รุ่นอะไรก็ได้ที่ใหม่กว่า 1.8.0 แต่ น้อยกว่า 2.0.x-dev" คุณยังสามารถที่จะใช้
`*` wildcard ใน `1.8.*` เมื่อคุณใช้ตัวเลือกนี้ แล้วใช้คำสั่ง `php composer.phar update` Composer จะทำการปรับปรุง dependencies
ของคุณให้เป็นรุ่นใหม่ที่สอดคล้องกับตัวเลือกที่คุณเลือก

### ตรวจสอบความปลอดภัยของ dependencies เหล่านั้น

[Security Advisories Checker][3] เป็น web service และ คำสั่ง command-line ทั้งสองทางนี้จะทำการตรวจสอบไฟล์ `composer.lock`
และจะเตือนคุณเมื่อ dependencies ที่คุณใช้นั้นสมควรที่จะได้รับการอัปเดต

* [เรียนรู้เพิ่มเติมเกี่ยวกับ Composer][4]

[1]: http://packagist.org/
[2]: http://twig.sensiolabs.org
[3]: https://security.sensiolabs.org/
[4]: http://getcomposer.org/doc/00-intro.md

